LDA     ERR
    BNE     L_Calculator_State_Involution_RTS;当出现错误时

    LDA     P_Scankey_value
    CMP     #D_NUM_Equal_Press
    BEQ     L_Calculator_State_Involution_Equal_Press;当按下等号后
    CMP     #MAX_Number_Input
    BCC     L_Calculator_State_Involution_Input_Number
    LDA     #Calculator_State_Involution_Input_Symbol;此时按下加减乘除键
    STA     Calculator_State;此时BUF1,BUF2已将运算值存储
    JSR     L_Clear_BBUF_Prog
    JSR     L_Clear_IBUF_FD_Prog
    ; JSR     L_COPY_BUF1_TO_IBUF_FD_Prog
    LDA     #0
    STA     R_Involution
    JSR     Calculator_Input
L_Calculator_State_Involution_RTS:
    RTS
L_Calculator_State_Involution_Equal_Press:;无数字自乘
    LDA     #Calc_First_Output_Involution
    STA     Calculator_State_Mechine
    JSR     Calculator_Input
    RTS

L_Calculator_State_Involution_Input_Number:
    JSR     L_Clear_IBUF_FD_Prog
L_Calculator_State_Involution_Number_Input_Prog_Input_Number:
    JSR     Calculator_Input
    LDA     #Calculator_State_Involution_Input
    STA     Calculator_State
    RTS

;===============================================
L_Calculator_State_Involution_Number_Input_Prog:
    LDA     ERR
    BNE     L_Calculator_State_Involution_Number_Input_Prog_RTS
    LDA     P_Scankey_value
    CMP     #MAX_Number_Input
    BCC     L_Calculator_State_Involution_Number_Input_Prog_Input_Number
    CMP     #D_NUM_Equal_Press
    BEQ     L_Calculator_State_Involution_Number_Input_Prog_Equal_Press
    JSR     Calculator_Input
    ; JSR     L_Output_Prog_Involution_IN
    ; JSR     L_Output_Prog_Involution_IN_Symbol
    LDA     #Calculator_State_Symbol_First_Press;此时按下加减乘除键
    STA     Calculator_State;此时BUF1,BUF2已将运算值存储
    
    LDA     Calculator_Symbol_State
    STA     OP
    LDA     #0
    STA     R_Involution
    JSR     Calculator_Input
    JSR     L_Clear_BBUF_Prog
    JSR     L_Clear_BUF2_FD_Prog
    JSR     L_Clear_BUF1_FD_Prog
    JSR     L_COPY_IBUF_TO_BUF1_FD_Prog
    JSR     L_COPY_BUF1_TO_BUF2_FD
L_Calculator_State_Involution_Number_Input_Prog_RTS:
    RTS
L_Calculator_State_Involution_Number_Input_Prog_Equal_Press:
    LDA     #Calculator_State_Involution
    STA     Calculator_State
    LDA     #Calc_First_Output_Involution_IN
    STA     Calculator_State_Mechine
    LDA     #State_Equal
    STA     Calculator_Symbol_State
    RTS    
;========================================
L_Calculator_State_Involution_Symbol:
    LDA     Calculator_Symbol_State
    STA     P_Temp+6
    JSR     Calculator_Input
    LDA     P_Scankey_value
    CMP     #D_NUM_Equal_Press
    BEQ     L_Calculator_State_Involution_Symbol_Equal
    CMP     #MAX_Number_Input
    BCC     L_Calculator_State_Involution_Symbol_Number
    LDA     #Calculator_State_Symbol_First_Press;一旦符号键按下，将IBUF的内容传送到，BUF1中
    STA     Calculator_State
    
    LDA     Calculator_Symbol_State
    STA     OP
    CMP     P_Temp+6
    BNE     L_Calculator_State_Involution_Symbol_RTS
    JSR     L_Display_lcd_Involution_Prog
    JSR     L_Copy_BUF1_TO_BBUF_Prog
    LDA     #Calculator_State_Involution
    STA     R_Involution
    STA     Calculator_State
L_Calculator_State_Involution_Symbol_RTS:
    RTS
L_Calculator_State_Involution_Symbol_Equal:
    JSR     L_Output_Prog_First_Output_
    LDA     #0
    STA     OP
    LDA     #Calculator_State_Equal_Press
    STA     Calculator_State
    JSR     L_Clr_Calculator_Symbol_Prog
    RTS
L_Calculator_State_Involution_Symbol_Number:
    LDA     #Calculator_State_Input;设置
    STA     Calculator_State
    LDA     Calculator_Symbol_State
    STA     OP
    RTS